@{
    ViewBag.Title = "SINTALOCAS - Cadastro de Afiliados";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Cadastro de Dependentes - Sem acréscimo na mensalidade</h2>
<body>
    @ViewBag.MensagemRetorno
    <form action="" id="formAfilia">
        <div class="row">
            Nome:
            <input type="text" data-mini="true" id="Nome" name="Nome" placeholder="nome completo" />
        </div>
        <div class="row">
            Dt. Nasc.:
            <input type="text" data-mini="true" id="DtNasc" name="DtNasc" style="width:120px;" placeholder="dd/mm/aaaa" onblur="validarDtNasc(this, '@ViewBag.RootView')" class="simple-field-data-mask" data-mask="00/00/0000" />
        </div>
        <div class="row">
            Grau de parentesco:
            <select id="GrauParente" data-mini="true" name="GrauParente" style="width:200px;">
                @foreach (KeyValuePair<int, string> item in ViewBag.GrauParentesco)
                {
                    <option value="@item.Key">@item.Value</option>
                }
            </select>
        </div>

        <div style="color:#FF0000" id="rDtNasc"></div>
        <div style="color:#FF0000" id="rForm"></div>
        <span id="rFormRetorno" style="color:#FF0000;">@Html.Raw(ViewBag.MensagemRetorno)</span>
        <br />
        <input type="hidden" id="idAfiliado" name="idAfiliado" value="@ViewBag.idAfiliado" />
        <input type="button" data-mini="true" id="btnGravar" class="BotaoFinaliza" value="Inserir" onclick="validarFormAfilia('@ViewBag.RootView')" />
    </form>

    @if (ViewBag.ListaDependentes.Count > 0)
    {
        var cont = 0;
        <div class="row">
            <h3>Dependentes Cadastrados</h3>
        </div>
        @*<div class="row" style="font-weight:bold; background-color: #000000; color:#FFFFFF">
                <div class="col-15" style="text-align:center">#</div>
                <div class="col-25">Nome</div>
                <div class="col-25">Parentesco</div>
            </div>*@
        foreach (var item in ViewBag.ListaDependentes)
        {
            cont++;
            <div class="row">
                @*<div style="text-align:center">@cont</div>
                    <div>@item.Nome</div>
                    <div>@item.GrauParentescoNome</div>
                    <div style="text-align: center">
                        <a href="~/Dependentes/Delete/@item.ID" style="color:#FFFFFF; background-color:#FF0000; padding:4px;" onclick="return ConfirmaAcao('excluir este registro')">Excluir</a>
                    </div>*@

                    <a href="~/Dependentes/Delete/@item.ID" style="color:#FFFFFF; background-color:#FF0000; padding:4px;" onclick="return ConfirmaAcao('excluir este registro')">Excluir</a>
                    @cont - @item.Nome ( @item.GrauParentescoNome )
            </div>
        }
    }
    else
    {
        <div class="row" style="font-weight:bold; font-size:16px; text-align: left">
            <label class="label">
                Nenhum dependente cadastrado
            </label>
        </div>
    }
    <br />
    <br />
    <input type="button" data-mini="true" id="btnProximo" class="BotaoFinaliza" value="Finalizar" onclick="window.location.href='Finalizar'" />
</body>